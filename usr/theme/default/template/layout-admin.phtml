<?php
// Load translation data
$this->i18nTheme('main');

$this->jQuery();
$this->bootstrap(array(
    'js/bootstrap.min.js',
    'css/font-awesome.min.css'
));
$this->css(array(
    $this->assetTheme('css/style.css'),
    $this->assetTheme('css/admin.css'),
    $this->assetTheme('css/menu.css'),
));
$module = Pi::service('module')->current();
?>
<!DOCTYPE HTML>
<html lang="<?php echo $locale ?>">
<head>
    <!-- Charset -->
    <meta charset="<?php echo $charset; ?>">

    <!-- Title -->
    <?php echo $this->headTitle(); ?>
</head>
<body id="pi-<?php echo $module; ?>" class="<?php echo $locale; ?>">

    <!-- gobal admin layout style: temporary there-->
    <style>
        body {
           overflow: hidden;
           width: 100%;
           height: 100%;
           margin: 0;
        }
        #pi-bar {
            background: #f1f1f1;
            height: 100px;
        }
        .pi-bar-top {
            position: absolute;
            top: 10px;
            height: 30px;
            width: 100%;
        }
        .header-logo {
            float: left;
            margin:0 20px;
        }
        .operation-switch {
            float: left;
        }
        .pi-bar-user {
            float: right;
            margin-right: 20px;
        }
        .pi-bar-user .dropdown {
            display: inline-block;
        }
        .module-menu {
            position: absolute;
            top: 50px;
            width: 100%;
            white-space: nowrap;
        }
        #pi-bar-admin {

        }
        #pi-wrap {
            position: absolute;
            top: 100px;
            bottom: 0;
            left: 0;
            right: 0;
        }
        #modules-menu {
            position: relative;
            width: 120px;
            overflow-y: auto;
            overflow-x: hidden;
            background: #F1F1F1;
            height: 100%;
        }
        #pi-content {
           position: absolute;
           left: 130px;
           right: 0;
           top: 0;
           bottom: 0;
           overflow: auto;
        }
        .pi-content-inner {
           min-width: 840px;
           margin:10px 10px 0;
        }
       .pi-main-content {
            margin-bottom: 10px;
        }
        #pi-footer {
            text-align: center;
            color: #666;
            border-top: 1px solid #E5E5E5;
            padding-top: 10px;
        }
        #modules-menu-show {
            margin-bottom: 10px;
        }
        .menu-vertical a {
            display: block;
        }

    </style>

    <!-- pi header bar: fixed-->
    <div id="pi-bar">
        <div class="pi-bar-top clearfix">
            <a href="<?php echo $this->url(); ?>" title="<?php echo $this->escape($sitename); ?>" class="header-logo"><?php echo $this->escape($sitename); ?></a>
            <div class="operation-switch">
               <?php echo $this->adminSwitch($module); ?>
            </div>
            <div class="pi-bar-user">
               <?php echo $this->widget('system-user-bar'); ?>
               <a href="<?php echo Pi::url('www'); ?>" title="<?php echo $this->escape($sitename); ?>" target="_blank"><?php _e('Go to front'); ?> <i class="icon-circle-arrow-right"></i> </a>
            </div>
        </div>

        <!-- each module or system  link : operation or manage -->
        <?php $navigation = $this->adminTop($module); ?>
        <?php if ($navigation) {  ?>
        <div class="global-nav module-menu">
            <div class="menu">
                <?php echo $navigation->menu()->setUlClass('menu-horizontal')->render();?>
            </div>
        </div>
        <?php } ?>
    </div>
    <div id="pi-wrap">
            <!-- modules list link : sidemenu,fixed-->
            <?php $navigation = $this->adminSide($module); ?>
            <?php if ($navigation) { ?>
            <div id="modules-menu">
                <?php echo $navigation->menu()->setUlClass('menu-vertical')->render(); ?>
            </div>
            <?php } ?>

            <!-- modules content -->
            <div id="pi-content">
                <div class="pi-content-inner">
                    <div class="clearfix pi-main-content">
                        <?php echo $content; ?>
                    </div>
                    <div id="pi-footer">
                        &copy; <a href="<?php echo Pi::url('www'); ?>" title="<?php echo $this->escape($sitename); ?>"><?php echo $this->escape($sitename); ?></a> | Powered by <a href="http://www.xoopsengine.org" title="Pi Engine" target="_blank">Pi Engine</a> | Design of <a href="http://www.xoopsengine.org" title="Pi Engine" target="_blank">Pi Engine</a>
                      <!-- Show execution time -->
                      <?php $time = microtime(true) - Pi::startTime(); ?>
                      <div style="font-size: 80%;text-align:center;" title="<?php _e('Execution time'); ?>"><?php echo $time; ?></div>
                    </div>
                </div>

            </div>
    </div>
    <script>
        $(function() {
            /*for debug info*/
            $("#pi-logger-output").appendTo($("#pi-content"));
        })
    </script>
</body>
</html>