<?php
$this->css($this->assetModule('front/front.css'));
?>
<?php include 'search-form.phtml'; ?>
<div class="panel panel-primary">
    <div class="panel-heading">
        <h3 class="panel-title"><?php _e('Search result'); ?></h3>
    </div>
    <div class="panel-body">
        <?php
            if (1 < $total) {
                echo sprintf(__('There are %d results.'), $total);
            } elseif (1 == $total) {
                echo sprintf(__('There is %d found.'), $total);
            } elseif (!empty($flood)) {
                echo __('Submission flood detected, please wait for a while.');
            } else {
                _e('No result found.');
            }
        ?>
    </div>
</div>

<?php foreach ($result as $name => $data) { ?>
<div class="panel panel-default">
    <div class="panel-heading">
        <h3 class="panel-title"><?php echo _escape($modules[$name]['title']); ?></h3>
    </div>
    <div class="panel-body">
        <?php
        $total = $data->getTotal();
        if (1 < $total) {
            $message = sprintf(__('There are %d results.'), $total);
        } elseif (1 == $total) {
            $message = sprintf(__('There is %d found.'), $total);
        } else {
            $message = __('No result found.');
        }
        ?>
        <a href="<?php echo $modules[$name]['url']; ?>"><?php echo $message; ?></a>
    </div>

    <div class="list-group">
        <?php foreach ($data as $item) { ?>
        <a href="<?php echo $item['url']; ?>" class="list-group-item">
            <h4 class="list-group-item-heading"><?php echo _escape($item['title']); ?></h4>
            <p class="list-group-item-text"><?php echo _escape($item['content']); ?></p>
        </a>
        <?php } ?>
    </div>
</div>
<?php } ?>
