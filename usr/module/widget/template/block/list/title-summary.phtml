<?php
$options    = (array) $block['options'];
$items      = (array) $block['items'];
$target     = empty($options['target_new']) ? '_self' : '_blank';
switch ($options['max_rows']) {
    case '0':
        $rows = 'col-md-12 col-xs-12';
        break;

    case '1':
        $rows = 'col-md-12 col-xs-12';
        break;

    case '2':
        $rows = 'col-md-6 col-xs-6';
        break;

    case '3':
        $rows = 'col-md-4 col-xs-4';
        break;

    case '4':
        $rows = 'col-md-3 col-xs-4';
        break;

    case '6':
        $rows = 'col-md-2 col-xs-3';
        break;

    case '12':
        $rows = 'col-md-1 col-xs-2';
        break;
}
?>
<div class="widget-list widget-list-summary">
    <?php foreach($items as $item) { ?>
        <div class="media <?php echo $rows; ?>">
            <div class="media-body">
                <?php if (!empty($item['link'])) { ?>
                    <h4 class="media-heading">
                        <a href="<?php echo $item['link']; ?>"
                           title="<?php echo _escape($item['caption']); ?>"
                           class="pi-ellipsis pi-ellipsis-1"
                           target="<?php echo $target; ?>"
                        >
                            <?php echo _escape($item['caption']); ?>
                        </a>
                    </h4>
                <?php } else { ?>
                    <h4 class="media-heading">
                        <?php echo _escape($item['caption']); ?>
                    </h4>
                <?php } ?>
                <div class="clearfix">
                    <?php echo $item['summary']; ?>
                    <?php if (!empty($item['link'])) { ?>
                        <div class="pull-right">
                            <a href="<?php echo $item['link']; ?>" target="<?php echo $target; ?>"><?php echo _b('More'); ?></a>
                        </div>
                    <?php } ?>
                </div>
            </div>
        </div>
    <?php } ?>
</div>