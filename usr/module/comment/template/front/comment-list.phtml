<?php
$this->css($this->assetModule('css/front.css', 'comment'));
$this->bootstrap('css/font-awesome.css');

// Count
$count = $comment['count'];
// Comment list generated by comment module:
// id, time, content, user
// uid, name, avatar, profile_url, IP
$posts = $comment['posts'];
// Pagination object
$paginator = $comment['paginator'];
?>

<div class="pi-comment">
    <?php
        if ($posts) {
    ?>
    <div class="pi-comment-list">
        <div class="pi-comment-header"><?php echo __('All active comments ') . " ({$count})" ?></div>
    <?php
            foreach ($posts as $post) {
    ?>
        <div class="media">
            <a class="pull-left" href="<?php echo $post['user']['url']; ?>" target="_blank">
                <?php echo $post['user']['avatar']; ?>
            </a>
            <div class="media-body">
                <div>
                    <span class="pi-comment-user">
                        <a href="<?php echo $post['user']['url']; ?>" target="_blank" title="<?php echo $post['user']['name']; ?>" class="highlight">
                            <?php echo $post['user']['name']; ?>
                        </a>
                    </span>
                    <span class="pull-right muted pi-comment-time"><?php echo _date($post['time']) ?></span>
                </div>
                <div class="pi-comment-desc">
<<<<<<< HEAD
                    <span class="muted pull-left"><?php _e('Commented on '); ?></span>
                    <a class="comment-title-hidden highlight pull-left" style="width: 70%" href="<?php echo $post['target']['url']; ?>" title="<?php echo _escape($post['target']['title']); ?>">
                        <?php echo _escape($post['target']['title']); ?>
=======
                    <span class="muted pull-left"><?php _e('Commented on ') ?></span>
                    <a class="comment-title-hidden highlight pull-left" style="max-width: 70%" href="<?php echo $post['target']['url'] ?>" title="<?php echo $post['target']['title'] ?>">
                        <?php echo $post['target']['title'] ?>
>>>>>>> 39dc6b938c6bf52563c73e37aa63b40d91010a7b
                    </a>
                </div>
                <div class="pi-comment-content">
                    <?php echo $post['content']; ?>
                </div>
                <div class="pi-comment-operation">
                <?php 
                    foreach ($post['operations'] as $operation => $optData) {
                        $class = '';
                        switch ($operation) {
                            case 'disable':
                                $class = 'icon-ban-circle';
                                break;
                            case 'edit':
                                $class = 'icon-pencil';
                                break;
                            case 'delete':
                                $class = 'icon-trash';
                                break;
                            case 'reply':
                                $class = 'icon-share-alt';
                                break;
                        }
                ?>
                    <span class="operation muted" style="visibility: visible">
                        <a href="<?php echo $optData['url']; ?>">
                            <i class="<?php echo $class; ?>" style="text-decoration: none"></i><?php echo _escape($optData['title']); ?>
                        </a>
                    </span>
                <?php
                    }
                ?>
                </div>
            </div>
        </div>
                
    <?php
            }
    ?>
    </div>
    <?php
        } else {
    ?>
    <div class="pi-comment-none"><?php _e('No comments available yet.'); ?></div>
    <?php
        }
    ?>
</div>
