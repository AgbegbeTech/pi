angular.module("pi",[]).directive("piUnique",["$http","$timeout","$parse",function(c,o,u){return{require:"ngModel",link:function(e,t,n,i){var r,a=u(n.piUnique)(e),s={};if(!a)throw new Error("Please set url value on pi-unique attribute");e.$watch(n.ngModel,function(e){e&&(r&&o.cancel(r),s[n.name]=e,r=o(function(){c.get(a,{cache:!0,params:s}).success(function(e){i.$setValidity("unique",!e.status)})},300))})},restrict:"A"}}]).directive("piMatch",function(){return{require:"ngModel",link:function(e,t,n,i){var r=t.inheritedData("$formController")[n.piMatch];i.$parsers.push(function(e){return e==r.$viewValue?(i.$setValidity("mismatch",!0),e):void i.$setValidity("mismatch",!1)}),r.$parsers.push(function(e){var t=i.$viewValue||"";return i.$setValidity("mismatch",e==t),e})},restrict:"A"}}).directive("piMessage",["$timeout","pi",function(c,o){return{template:'<div ng-show="alert" style="position: fixed; z-index: 1043; width: 60%; left: 20%; text-align: center; top: 20px"><div class="label label-{{alert.type}}" style="font-size: 16px; padding: 8px 15px; white-space: normal;"><i class="fa fa-{{alert.cls}}"></i><span style="margin-left: 10px;">{{alert.message}}</span></div></div>',restrict:"A",scope:!0,replace:!0,link:function(n,e,t){var i,r=t.time||3e3,a=o.translate.ERROR||"Connect error, Please try again later",s=o.translate.LOAD||"Loading...";n.$parent.$watch(t.piMessage,function(e){var t={};if(!angular.isUndefined(e))if(angular.isNumber(e)&&(e={status:e}),e){switch(e.status){case 0:t.cls="minus-circle",t.message=e.message||a,t.type="danger";break;case 2:t.cls="spinner fa-spin",t.type="info",t.message=e.message||s;break;default:t.cls="check",t.type="success",t.message=e.message}i&&c.cancel(i),n.alert=t,2!=e.status&&(i=c(function(){n.alert=""},r))}else n.alert=""})}}}]).directive("piAlert",function(){return{template:'<div ng-if="message" class="alert" ng-class="type && \'alert-\' + type"><button class="close" ng-click="close()">&times;</button>{{message}}</div>',restrict:"A",scope:{type:"=",message:"="},link:function(e,t,n){e.close=function(){e.message=""}}}}).directive("piHoverInput",function(){return{template:'<div class="pi-hover-input" ng-class="{\'pi-hover-input-editing\': editing}"><span ng-click="inputShow()">{{text}}</span><input type="text" class="form-control input-sm" ng-model="text" ng-blur="editTextAction()" ng-keypress="enterSaveAction($event)"></div>',replace:!0,scope:{text:"="},restrict:"A",controller:"piHoverInputCtrl"}}).controller("piNavTopCtrl",["$scope","$location",function(e,t){e.navClass=function(e){if(t.path().substr(0,e.length)==e)return"active"}}]).controller("piHoverInputCtrl",["$scope","$element","$timeout","$attrs",function(t,n,i,e){var r=t.$parent[e.piHoverInput]||t.text;t._text=t.text,t.inputShow=function(){t.editing=1,i(function(){var e=n.find("input");e.val(""),e[0].focus(),e.val(t.text)},0,!1)},t.editTextAction=function(){t.text=t.text.trim(),t.text?t.$emit("piHoverInputSave",r):t.text=t._text,t.editing=0},t.enterSaveAction=function(e){13==e.which&&(t.editing=0,i(function(){e.target.blur()},0,!1))}}]).provider("pi",["$httpProvider","$locationProvider",function(t,n){var i={};this.$get=function(){return{translate:function(e){var t=i[e];return t||e}}},this.addTranslations=function(e){angular.extend(i,e)},this.addAjaxInterceptors=function(){t.interceptors.push(["$q","$rootScope",function(n,i){return{response:function(e){var t=e.data;return angular.isObject(t)&&t.hasOwnProperty("message")&&(i.alert=t),e},responseError:function(e){var t=e.data;return i.alert={status:0,message:t.message},angular.isDefined(piLoggerSetCategoryDisplay)&&t.exception&&(document.getElementById("pi-logger-category-debug").innerHTML="<pre>"+t.exception.xdebug_message+"</pre>",piLoggerSetCategoryDisplay("debug",1)),n.reject(e)}}}])},this.setGetHeader=function(e){e=e||{"X-Requested-With":"XMLHttpRequest",Accept:"*/*"};t.defaults.headers.get=e},this.setHashPrefix=function(e){n.hashPrefix(e||"!")}}]).filter("translate",["pi",function(e){return e.translate}]),angular.module("pi",[]).directive("piUnique",["$http","$timeout","$parse",function(c,o,u){return{require:"ngModel",link:function(e,t,n,i){var r,a=u(n.piUnique)(e),s={};if(!a)throw new Error("Please set url value on pi-unique attribute");e.$watch(n.ngModel,function(e){e&&(r&&o.cancel(r),s[n.name]=e,r=o(function(){c.get(a,{cache:!0,params:s}).success(function(e){i.$setValidity("unique",!e.status)})},300))})},restrict:"A"}}]).directive("piMatch",function(){return{require:"ngModel",link:function(e,t,n,i){var r=t.inheritedData("$formController")[n.piMatch];i.$parsers.push(function(e){return e==r.$viewValue?(i.$setValidity("mismatch",!0),e):void i.$setValidity("mismatch",!1)}),r.$parsers.push(function(e){var t=i.$viewValue||"";return i.$setValidity("mismatch",e==t),e})},restrict:"A"}}).directive("piMessage",["$timeout","pi",function(c,o){return{template:'<div ng-show="alert" style="position: fixed; z-index: 1043; width: 60%; left: 20%; text-align: center; top: 20px"><div class="label label-{{alert.type}}" style="font-size: 16px; padding: 8px 15px; white-space: normal;"><i class="fa fa-{{alert.cls}}"></i><span style="margin-left: 10px;">{{alert.message}}</span></div></div>',restrict:"A",scope:!0,replace:!0,link:function(n,e,t){var i,r=t.time||3e3,a=o.translate.ERROR||"Connect error, Please try again later",s=o.translate.LOAD||"Loading...";n.$parent.$watch(t.piMessage,function(e){var t={};if(!angular.isUndefined(e)){if(angular.isNumber(e)&&(e={status:e}),!e)return void(n.alert="");switch(e.status){case 0:t.cls="minus-circle",t.message=e.message||a,t.type="danger";break;case 2:t.cls="spinner fa-spin",t.type="info",t.message=e.message||s;break;default:t.cls="check",t.type="success",t.message=e.message}i&&c.cancel(i),n.alert=t,2!=e.status&&(i=c(function(){n.alert=""},r))}})}}}]).directive("piAlert",function(){return{template:'<div ng-if="message" class="alert" ng-class="type && \'alert-\' + type"><button class="close" ng-click="close()">&times;</button>{{message}}</div>',restrict:"A",scope:{type:"=",message:"="},link:function(e){e.close=function(){e.message=""}}}}).directive("piHoverInput",function(){return{template:'<div class="pi-hover-input" ng-class="{\'pi-hover-input-editing\': editing}"><span ng-click="inputShow()">{{text}}</span><input type="text" class="form-control input-sm" ng-model="text" ng-blur="editTextAction()" ng-keypress="enterSaveAction($event)"></div>',replace:!0,scope:{text:"="},restrict:"A",controller:"piHoverInputCtrl"}}).controller("piNavTopCtrl",["$scope","$location",function(e,t){e.navClass=function(e){return t.path().substr(0,e.length)==e?"active":void 0}}]).controller("piHoverInputCtrl",["$scope","$element","$timeout","$attrs",function(t,n,i,e){var r=t.$parent[e.piHoverInput]||t.text;t._text=t.text,t.inputShow=function(){t.editing=1,i(function(){var e=n.find("input");e.val(""),e[0].focus(),e.val(t.text)},0,!1)},t.editTextAction=function(){t.text=t.text.trim(),t.text?t.$emit("piHoverInputSave",r):t.text=t._text,t.editing=0},t.enterSaveAction=function(e){13==e.which&&(t.editing=0,i(function(){e.target.blur()},0,!1))}}]).provider("pi",["$httpProvider","$locationProvider",function(t,n){var i={};this.$get=function(){return{translate:function(e){var t=i[e];return t||e}}},this.addTranslations=function(e){angular.extend(i,e)},this.addAjaxInterceptors=function(){t.interceptors.push(["$q","$rootScope",function(n,i){return{response:function(e){var t=e.data;return angular.isObject(t)&&t.hasOwnProperty("message")&&(i.alert=t),e},responseError:function(e){var t=e.data;return i.alert={status:0,message:t.message},angular.isDefined(piLoggerSetCategoryDisplay)&&t.exception&&(document.getElementById("pi-logger-category-debug").innerHTML="<pre>"+t.exception.xdebug_message+"</pre>",piLoggerSetCategoryDisplay("debug",1)),n.reject(e)}}}])},this.setGetHeader=function(e){e=e||{"X-Requested-With":"XMLHttpRequest",Accept:"*/*"};t.defaults.headers.get=e},this.setHashPrefix=function(e){n.hashPrefix(e||"!")}}]).filter("translate",["pi",function(e){return e.translate}]);