angular.module("pi",[]).directive("piUnique",["$http","$timeout",function(a,b){function c(c,d,e,f){var g,h=e.piUnique,i={};if(!h)throw new Error("Please set url value on pi-unique attribute");c.$watch(e.ngModel,function(c){c&&(g&&b.cancel(g),i[e.name]=c,g=b(function(){a.get(h,{cache:!0,params:i}).success(function(a){f.$setValidity("unique",!a.status)})},400))})}return{require:"ngModel",link:c,restrict:"A"}}]).directive("piMatch",function(){var a=function(a,b,c,d){var e=b.inheritedData("$formController")[c.piMatch];d.$parsers.push(function(a){return a==e.$viewValue?(d.$setValidity("mismatch",!0),a):(d.$setValidity("mismatch",!1),void 0)}),e.$parsers.push(function(a){var b=d.$viewValue||"";return d.$setValidity("mismatch",a==b),a})};return{require:"ngModel",link:a,restrict:"A"}}).directive("piMessage",["$timeout","pi",function(a,b){return{template:'<div ng-show="alert" style="position: fixed; z-index: 1013; width: 60%; left: 20%; text-align: center; top: 20px"><div class="label label-{{alert.type}}" style="font-size: 16px; padding: 8px 15px; white-space: normal;"><i class="icon-{{alert.cls}}"></i><span style="margin-left: 10px;">{{alert.message}}</span></div></div>',restrict:"A",scope:!0,replace:!0,link:function(c,d,e){var f,g=e.time||3e3,h=b.translations.ERROR||"Connect error, Please try again later",i=b.translations.LOAD||"Loading...";c.$parent.$watch(e.piMessage,function(b){var d={};if(!angular.isUndefined(b)){if(angular.isNumber(b)&&(b={status:b}),!b)return c.alert="",void 0;switch(b.status){case 0:d.cls="minus-sign",d.message=b.message||h,d.type="important";break;case 2:d.cls="spinner icon-spin",d.type="info",d.message=b.message||i;break;default:d.cls="ok",d.type="success",d.message=b.message}f&&a.cancel(f),c.alert=d,2!=b.status&&(f=a(function(){c.alert=""},g))}})}}}]).directive("piAlert",function(){return{template:'<div ng-if="message" class="alert" ng-class="type && \'alert-\' + type"><button class="close" ng-click="close()">&times;</button>{{message}}</div>',restrict:"A",scope:{type:"=",message:"="},link:function(a){a.close=function(){a.message=""}}}}).directive("piNavTabs",["$location",function(){return{template:'<ul class="nav nav-tabs"><li ng-repeat="item in navTabs" ng-class="navClass(item.href)"><a href="{{item.href}}">{{item.text}}</a></ul>',replace:!0,scope:!0,restrict:"A",controller:"piNavTabsCtrl"}}]).directive("piHoverInput",function(){return{template:'<div class="pi-hover-input" ng-class="{\'pi-hover-input-editing\': editing}"><span ng-click="inputShow()">{{text}}</span><input type="text" class="input-medium" ng-model="text" ng-blur="editTextAction()" ng-keypress="enterSaveAction($event)"></div>',replace:!0,scope:{text:"="},restrict:"A",controller:"piHoverInputCtrl"}}).controller("piNavTabsCtrl",["$scope","$location","pi",function(a,b,c){var d=/^.*\//;a.navTabs=c.navTabs,a.navClass=function(a){var c=a.replace(d,"/");if(c)return b.path().substr(0,c.length)==c?"active":void 0}}]).controller("piHoverInputCtrl",["$scope","$element","$timeout","$attrs",function(a,b,c,d){function e(){a.text=a.text.trim(),a.text?a.$emit("piHoverInputSave",f):a.text=a._text,a.editing=0}var f=a.$parent[d.piHoverInput]||a.text;a._text=a.text,a.inputShow=function(){a.editing=1,c(function(){var c=b.find("input");c.val(""),c[0].focus(),c.val(a.text)})},a.editTextAction=e,a.enterSaveAction=function(b){13==b.which&&(a.editing=0,c(function(){b.target.blur()}))}}]).provider("pi",["$httpProvider","$locationProvider",function(a,b){var c={navTabs:{},translations:{}};this.$get=[function(){return c}],this.navTabs=function(a){c.navTabs=a},this.translations=function(a){c.translations=a},this.ajaxSetup=function(){a.interceptors.push(["$q","$rootScope",function(a,b){return{response:function(a){var c=a.data;return angular.isObject(c)&&c.hasOwnProperty("message")&&(b.alert=c),a},responseError:function(c){return b.alert={status:0,message:c.data.message},a.reject(c)}}}])},this.setGetHeader=function(b){var b=b||{"X-Requested-With":"XMLHttpRequest",Accept:"*/*"};a.defaults.headers.get=b},this.hashPrefix=function(a){b.hashPrefix(a||"!")}}]).filter("translate",["pi",function(a){return function(b){var c=a.translations[b];return c?c:b}}]);