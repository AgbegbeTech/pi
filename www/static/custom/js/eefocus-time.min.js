!function(a){var b=this.eefocus||{},c="\u81f3\u4eca",d={optionFragment:function(a,b){var c='<option value="">\u8bf7\u9009\u62e9';if(a>b)for(var d=a;d>=b;d--)c+='<option value="'+d+'">'+d;else for(var d=a;b>=d;d++)c+='<option value="'+d+'">'+d;return c},select:function(a){var c,b=" \u5e74 ";return"month"==a?(b=" \u6708 ",c=this.optionFragment(1,12)):c=this.optionFragment(this.maxYear,1950),'<select class="input-small" data-name="'+a+'">'+c+"</select>"+b},$:function(a){return this.el.find("[data-name="+a+"]")},setValue:function(){var a=this.year.val(),b=this.month.val();a&&b?this.input.val(a+"-"+b):this.input.val("")}};b.StartTime=function(b,c,d,e){this.el=a("#"+b),this.maxYear=c,this.name=d,this.render(),this.events(),e&&(e=e.split("-"),this.year.val(e[0]),this.month.val(e[1]).trigger("change"))},b.EndTime=function(b,d,e,f,g){this.el=a("#"+b),this.maxYear=d,this.name=e,this.render(),this.events(),f&&(f==c?this.$("sofar").attr("checked","checked").trigger("change"):(f=f.split("-"),this.year.val(f[0]),this.month.val(f[1]).trigger("change"))),this.valiate(),this.sofar=g},a.extend(b.StartTime.prototype,d,{render:function(){var a=this.select("year")+this.select("month")+'<input type="hidden" name="'+this.name+'">';this.el.html(a),this.input=this.el.find("[name="+this.name+"]"),this.year=this.$("year"),this.month=this.$("month")},events:function(){var b=a.proxy(this.setValue,this);this.year.change(b),this.month.change(b)}}),a.extend(b.EndTime.prototype,d,{render:function(){var a=this.select("year")+this.select("month")+'<label class="checkbox"><input type="checkbox" data-name="sofar">\u81f3\u4eca</label><input type="hidden" name="'+this.name+'">';this.el.html(a),this.input=this.el.find("[name="+this.name+"]"),this.year=this.$("year"),this.month=this.$("month")},events:function(){var b=this,d=a.proxy(this.setValue,this);this.$("sofar").change(function(){a(this).attr("checked")?(b.year.val("").attr("disabled","disabled"),b.month.val("").attr("disabled","disabled"),b.input.val(c)):(b.year.removeAttr("disabled"),b.month.removeAttr("disabled"),b.input.val(""))}),this.year.change(d),this.month.change(d)},valiate:function(){var a=this.el.parents("form"),b=a.find("[name=start]"),d=this.input,e=this;a.submit(function(a){var f=b.val(),g=d.val(),h=!0;f&&g||(e.showErrMsg("\u5f00\u59cb\u65f6\u95f4\u548c\u7ed3\u675f\u65f6\u95f4\u4e0d\u80fd\u4e3a\u7a7a",a),h=!1),f&&g&&(f=f.split("-"),g=g==c?e.sofar.split("-"):g.split("-"),f[0]=parseInt(f[0]),f[1]=parseInt(f[1]),g[0]=parseInt(g[0]),g[1]=parseInt(g[1]),(f[0]>g[0]||f[0]==g[0]&&f[1]>g[1])&&(e.showErrMsg("\u5f00\u59cb\u65f6\u95f4\u4e0d\u80fd\u5927\u4e8e\u7ed3\u675f\u65f6\u95f4"),h=!1)),h||(a.preventDefault(),a.stopPropagation())})},showErrMsg:function(a){this.el.parents(".control-group").addClass("error").find(".help-inline").html(a).show()}}),this.eefocus=b}(jQuery);